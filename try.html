<!DOCTYPE html>
<html lang="en">
  <head>
	
		<TITLE>Cache example</TITLE>
		<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
	
		<!--Scripts-->
    <script type="text/javascript" src="scripts/jquery-2.1.4.min.js"></script> 	<!-- jQuery -->
    <script type="text/javascript" src="scripts/prefixfree.min.js"></script>    <!-- prefixFree from -->
    <script type="text/javascript" src="scripts/jquery.preload-1.00.js"></script>
		<style>
			.toLoad
			{
				display:none;
			}
			.loadingCentre
			{
				position:absolute;
				height:130px;
				width:130px;
				left:50%;
				top:50%;
				margin-left:-65px;
				margin-top:-65px;
				background:white;
			}
			
			#loadingBar
			{
				width:130px;
				height:15px;
				border: 1px solid #ccc;
				border-radius:20px;				
			}
			
			.loadedContent
			{
				height:800px;
			}
			#loadingText
			{
				text-align:center;
				color:#AAA;
				font-size:11px;
				font-family:arial;
			}
		</style>
  </head>

  <body>		
		
		<!--Some loading stuff-->
		<div class="loadingContent loadingCentre">
			<img src="images/gears.gif">			
			<div id="loadingBar"></div>
			<div id="loadingText">Loading 3 fairly large files..</div>
		</div>
		
		<!--These are some big pictures -->
		<img src="http://i.imgur.com/PQEPwzE.jpg" class="toLoad loadedContent">
		<img src="https://i.imgur.com/t3ZGoHy.jpg" class="toLoad loadedContent">
		<img src="https://i.imgur.com/n2GBvE6.jpg" class="toLoad loadedContent">
		
		
		<script type="text/javascript">
		
			//An example progress function - just a console log in this case
			function progress(x, total)
			{				
				var p1 = parseInt(100/total*x);
				var p2 = p1 + 1;
				console.log(p1 + "," + p2);
				$("#loadingBar").css("background","linear-gradient(90deg, #3498db " + p1 + "%, #FFF " + p2 + "%)");				
			}
			
			//An example completion function
			function complete()
			{
				//Could put something in here to do after load (this replaces the default action)
				
				//This would do the same as the default function if it's wanted as well
				//$(".loadingContent").fadeOut(200, function(){$(".loadedContent").fadeIn(200);});						
			}
			
			
			//jQuery call to the module	 
			$(".toLoad").preload({loadingClass: 'loadingContent',									// Class of elements to show while loading
														loadedClass: 'loadedContent',										// Class of elements to show once loaded
														progressFunction: progress											// Optional function to call per element loaded (passing in index,totalCount)
				//										onComplete: complete														// Optional function to call once all are loaded
														});		
		</script>

  </body>
</html>
