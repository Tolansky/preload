!function(n){n.fn.preload=function(o){function s(){e++,null!==l.progressFunction&&l.progressFunction(e,a),e>=a&&(console.log("done!"),t=!1,null===l.onComplete?window.setTimeout(function(){n("."+l.loadingClass).fadeOut(200,function(){n("."+l.loadedClass).fadeIn(200)})},300):l.onComplete())}var l=n.extend({loadingClass:"",loadedClass:"",progressFunction:null,onComplete:null,waitFirst:100},o),e=0,a=this.length,t=!0;n("."+l.loadedClass).css("display","none"),n("."+l.loadingClass).css("display","none"),setTimeout(function(){t&&n("."+l.loadingClass).css("display","block")},l.waitFirst),this.each(function(o,l){var e=new Image;e.src=n(l).attr("src"),e.onload=s})}}(jQuery);